# Ask-lite v0.1 Proposal

Ask! is a framework to write wasm smart contracts, written by assemblyscript, like ink!. But as far as I know, Patract Labs doesn't maintain it anymore.

So we contacted a former member of Patract Labs, who was one of the core developers of Ask!, to continue maintaining a redesigned version, called Ask-lite, which you can think of as a successor to Ask!.

In addition, we also contacted Astar, Phala and other teams who are interested in Ask!, and they are also very interested in Ask-lite. We plan to invite them to join and contribute to ask-lite after finishing the initial version of Ask-lite.

## Design

### Architecture

- Ask! components:
  1. Contract Framework
  2. Contract Preprocessor
  3. ask-cli (similar to the `cargo-contract` tool of `ink!`)

Compiling a wasm smart contract with `Ask!` actually goes through **TWO** compilation processes.

The first process just collects some useful information for the second time, and the lack of type checking leads to the introduction of potentially invalid information in the second process. And multiple compilation issues lead to poor maintainability so that we need to spending more time locating problems in development contracts.

Although `Ask!` provides `ask-cli` to solve this problem, it is not elegant.

- Ask-lite components:
    1. Contract Framework
    2. Transform Framework

`Ask-lite` uses a more elegant way: manipulate the AST generated by the contract code through the `asc` toolchain to get final wasm code and metadata, without introducing additional tools (like `ask-cli` or `cargo-contract`) to help development wasm contracts.

### Codec

  Ask! uses [as-scale-codec](https://github.com/LimeChain/as-scale-codec) for encoding/decoding, but Ask-lite uses [as-serde-scale](https://github.com/yjhmelody/serde-as/tree/main/packages/as-serde-scale) instead.

  Compared with [as-scale-codec](https://github.com/LimeChain/as-scale-codec), [as-serde-scale](https://github.com/yjhmelody/serde-as/tree/main/packages/as-serde-scale) has better codec performance and ease of use, and it is maintained by ourselves.

### Contract framework

The contract framework will be developed on the basis of the new architecture, using new decorator syntax just like `Ask!`, but it will be closer to the `ink!` style.

## v0.1 Development plan (12 weeks)

- Week 1~4 (3 developers)

  1. Redesign the architecture of Ask! and implement it.

  2. Track the latest code changes of pallet-contracts and ink!.

- Week 5~7 (3 developers)

  1. Introduce a more general codec framework `as-serde` and a SCALE codec library `as-serde-scale` (based on `as-serde`), and adapt it to the contract framework.

  2. Redesign the interface of Ask! to be closer to `ink!`.

  3. Redesign the `PackedLayout` / `SpreadLayout` interface, referring to the storage abstraction of `ink!`.

  4. Redesign the Event syntax, and compatible with `ink!`.

  5. Integrate all designs using new decorator syntax closer to `ink!`.

- Week 8~10 (3 developers)

  1. Provide suitable abstractions for crypto primitives.

  2. Improve env functions.

  3. Implement some common storage data structures, such as Array/Mapping, which is similar to `ink!`.

  4. Add a type analysis phase to the compile phase, which is used for the generation of `metadata.json` (compatible with `ink!` metadata).

- Week 11~12 (3 developers)

  1. Write some contract examples, such as flipper/ERC20.

  2. Write documentation.
